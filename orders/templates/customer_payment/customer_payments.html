{% extends 'base.html' %}
{% block content %}
<h2>My Payments</h2>
<table border="1">
    <tr>
        <th>Order ID</th>
        <th>Amount</th>
        <th>Status</th>
        <th>Payment Method</th>
        <th>Actions</th>
    </tr>
    {% for payment in payments %}
    <tr>
        <td>{{ payment.order.id }}</td>
        <td>${{ payment.amount }}</td>
        <td>{{ payment.payment_status }}</td>
        <td>{{ payment.payment_method }}</td>
        <td>
            {% if payment.payment_status == "Successful" and not payment.refund_status %}
            <a href="{% url 'request_refund' payment.id %}" style="color: red;">Request Refund</a>
            {% else %}
            <span>Refunded</span>
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
